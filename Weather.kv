#:kivy 1.9.1
#:import kivy kivy


ScreenManager:
    id: screen_manager

    SearchScreen:
        id: search_screen
        name: 'SearchScreen'
        manager: screen_manager
    ForecastScreen:
        id: forecast_screen
        name: 'ForecastScreen'
        manager: screen_manager

        label_location: search_screen.location
        address: forecast_screen.address
        cTime: forecast_screen.cTime
        cTemp: forecast_screen.cTemp
        cIcon: forecast_screen.cIcon
        cSummary: forecast_screen.cSummary
        cHumidity: forecast_screen.cHumidity
        cUVIndex: forecast_screen.cUVIndex
        cOzone: forecast_screen.cOzone
        cWindSpeed: forecast_screen.cWindSpeed
        cWindGust: forecast_screen.cWindGust
        cVisibility: forecast_screen.cVisibility

        dTime0: forecast_screen.dTime0
        dIcon0: forecast_screen.dIcon0
        dTempHi0: forecast_screen.dTempHi0
        dTempLo0: forecast_screen.dTempLo0
        dTime1: forecast_screen.dTime1
        dIcon1: forecast_screen.dIcon1
        dTempHi1: forecast_screen.dTempHi1
        dTempLo1: forecast_screen.dTempLo1
        dTime2: forecast_screen.dTime2
        dIcon2: forecast_screen.dIcon2
        dTempHi2: forecast_screen.dTempHi2
        dTempLo2: forecast_screen.dTempLo2
        dTime3: forecast_screen.dTime3
        dIcon3: forecast_screen.dIcon3
        dTempHi3: forecast_screen.dTempHi3
        dTempLo3: forecast_screen.dTempLo3
        dTime4: forecast_screen.dTime4
        dIcon4: forecast_screen.dIcon4
        dTempHi4: forecast_screen.dTempHi4
        dTempLo4: forecast_screen.dTempLo4
        dTime5: forecast_screen.dTime5
        dIcon5: forecast_screen.dIcon5
        dTempHi5: forecast_screen.dTempHi5
        dTempLo5: forecast_screen.dTempLo5
        dTime6: forecast_screen.dTime6
        dIcon6: forecast_screen.dIcon6
        dTempHi6: forecast_screen.dTempHi6
        dTempLo6: forecast_screen.dTempLo6


<SearchScreen>:
    display: entry
    Image:
        source: "data/background2.jpg"
        size: root.size
        allow_stretch: True
        keep_ratio: False
    Image:
        source: "data/logo.png"
        pos: root.center_x-(root.width/4), root.center_y+(root.height/40)
        keep_ratio: True
        size_hint_y: None
        size_hint_x: None
        width: root.width/2
        height: self.width/2

    FloatLayout:
        TextInput:
            id: entry
            text: 'San Marcos, CA'
            pos: root.center_x-(root.width/4), root.center_y-(root.height/40)
            size_hint_x: None
            size_hint_y: None
            height: (root.height/20)
            width: (root.width/2)
            multiline:False
            on_text_validate:
                root.set_location(entry.text)
        Button:
            text: "Get Weather"
            pos: root.center_x-(self.width/2), root.center_y-(root.height/10)
            size_hint_x: None
            size_hint_y: None
            height: (root.height/20)
            width: (root.width/3)
            on_release:
                root.set_location(entry.text)




<ForecastScreen>:
    on_enter:
        root.get_data()
    Image:
        source: "data/background2.jpg"
        allow_stretch: True
        keep_ratio: False

    BoxLayout:
        orientation: 'vertical'
        ActionBar:
            pos_hint: {'top':1}
            ActionView:
                use_separator: True
                ActionPrevious:
                    title: root.address
                    with_previous: False
                    app_icon: 'data/icon.png'
                ActionOverflow:
                ActionButton:
                    important:True
                    icon: 'data/search.png'
                    on_press:
                        root.manager.current="SearchScreen"
                        root.manager.transition.direction = 'right'

                ActionGroup:
                    ActionButton:
                        text: 'History'
        BoxLayout:
            orientation: 'vertical'

            Label:
                text: root.cTime
                text_size: self.text_size
                halign: 'center'

            BoxLayout:
                orientation: 'horizontal'

                BoxLayout:
                    orientation: 'horizontal'
                    Image:
                        source: "data/%s.png" % root.cIcon
                        allow_stretch: True
                        keep_ratio: True
                    Label:
                        text: "[b]%sºF[/b]" % root.cTemp
                        markup: True
                        font_size:'30sp'
                        halign: 'center'
            Label:
                text: root.cSummary
                text_size: self.text_size
                halign: 'center'



        GridLayout:
            cols: 2
            rows: 2

            Button:
                background_color: (0,0,0,.1)
                on_press:
                    self.background_color= (0,0,0,.2)
                on_release:
                    self.background_color= (0,0,0,.1)

                text: "Humidity:\n\n[size=20sp]%s%%[/size]" % root.cHumidity
                markup:True
                text_size: self.size
                halign: 'right'
                valign: 'top'
                padding_x: 20
                padding_y: 10
                Image:
                    source: "data/humidity.png"
                    pos: self.parent.center_x-(self.width), self.parent.center_y-self.height/2
                    height: self.parent.height-self.parent.height/3
                    width: self.parent.width/2


            Button:
                background_color: (0,0,0,.1)
                on_press:
                    self.background_color= (0,0,0,.2)
                on_release:
                    self.background_color= (0,0,0,.1)

                text: "UV Index:\n\n[size=20sp]%s[/size]" % root.cUVIndex
                markup:True
                text_size: self.size
                halign: 'right'
                valign: 'top'
                padding_x: 20
                padding_y: 10
                Image:
                    source: "data/uv-index.png"
                    pos: self.parent.center_x-(self.width), self.parent.center_y-self.height/2
                    height: self.parent.height-self.parent.height/3
                    width: self.parent.width/2

            Button:
                background_color: (0,0,0,.1)
                on_press:
                    self.background_color= (0,0,0,.2)
                on_release:
                    self.background_color= (0,0,0,.1)
                text: "Speed:\n\n[size=20sp]%s mph[/size]" % (root.cWindSpeed)
                markup:True
                text_size: self.size
                halign: 'right'
                valign: 'top'
                padding_x: 20
                padding_y: 10
                Image:
                    source: "data/wind.png"
                    pos: self.parent.center_x-(self.width), self.parent.center_y-self.height/2
                    height: self.parent.height-self.parent.height/3
                    width: self.parent.width/2

            Button:
                background_color: (0,0,0,.1)
                on_press:
                    self.background_color= (0,0,0,.2)
                on_release:
                    self.background_color= (0,0,0,.1)
                text: 'Visibility:\n\n[size=20sp]%s[/size]' % root.cVisibility
                markup:True
                text_size: self.size
                halign: 'right'
                valign: 'top'
                padding_x: 20
                padding_y: 10
                Image:
                    source: "data/visibility.png"
                    pos: self.parent.center_x-(self.width), self.parent.center_y-self.height/2
                    height: self.parent.height-self.parent.height/3
                    width: self.parent.width/2

        BoxLayout:
            orientation: 'horizontal'

            Button:
                text:  '%s\n\n\n\n\n[b][size=20sp]%sºF[/size][/b]\n%sºF' %  (root.dTime0, root.dTempHi0, root.dTempLo0)
                markup:True
                text_size: self.size
                halign: 'center'
                valign: 'top'
                padding_y: 15

                background_color: (0,0,0,.1)
                on_press:
                    self.background_color= (0,0,0,.2)
                on_release:
                    self.background_color= (0,0,0,.1)
                Image:
                    source: "data/%s.png" % root.dIcon0
                    pos: self.parent.center_x-(self.width/2), self.parent.center_y-(self.height/3)
                    height: self.parent.height-self.parent.height/3
                    width: self.parent.width/2

            Button:
                text:  '%s\n\n\n\n\n[b][size=20sp]%sºF[/size][/b]\n%sºF' %  (root.dTime1, root.dTempHi1, root.dTempLo1)
                markup:True
                text_size: self.size
                halign: 'center'
                valign: 'top'
                padding_y: 15

                background_color: (0,0,0,.1)
                on_press:
                    self.background_color= (0,0,0,.2)
                on_release:
                    self.background_color= (0,0,0,.1)
                Image:
                    source: "data/%s.png" % root.dIcon1
                    pos: self.parent.center_x-(self.width/2), self.parent.center_y-(self.height/3)
                    height: self.parent.height-self.parent.height/3
                    width: self.parent.width/2
            Button:
                text:  '%s\n\n\n\n\n[b][size=20sp]%sºF[/size][/b]\n%sºF' %  (root.dTime2, root.dTempHi2, root.dTempLo2)
                markup:True
                text_size: self.size
                halign: 'center'
                valign: 'top'
                padding_y: 15

                background_color: (0,0,0,.1)
                on_press:
                    self.background_color= (0,0,0,.2)
                on_release:
                    self.background_color= (0,0,0,.1)
                Image:
                    source: "data/%s.png" % root.dIcon2
                    pos: self.parent.center_x-(self.width/2), self.parent.center_y-(self.height/3)
                    height: self.parent.height-self.parent.height/3
                    width: self.parent.width/2
            Button:
                text:  '%s\n\n\n\n\n[b][size=20sp]%sºF[/size][/b]\n%sºF' %  (root.dTime3, root.dTempHi3, root.dTempLo3)
                markup:True
                text_size: self.size
                halign: 'center'
                valign: 'top'
                padding_y: 15

                background_color: (0,0,0,.1)
                on_press:
                    self.background_color= (0,0,0,.2)
                on_release:
                    self.background_color= (0,0,0,.1)
                Image:
                    source: "data/%s.png" % root.dIcon3
                    pos: self.parent.center_x-(self.width/2), self.parent.center_y-(self.height/3)
                    height: self.parent.height-self.parent.height/3
                    width: self.parent.width/2
            Button:
                text:  '%s\n\n\n\n\n[b][size=20sp]%sºF[/size][/b]\n%sºF' %  (root.dTime4, root.dTempHi4, root.dTempLo4)
                markup:True
                text_size: self.size
                halign: 'center'
                valign: 'top'
                padding_y: 15

                background_color: (0,0,0,.1)
                on_press:
                    self.background_color= (0,0,0,.2)
                on_release:
                    self.background_color= (0,0,0,.1)
                Image:
                    source: "data/%s.png" % root.dIcon4
                    pos: self.parent.center_x-(self.width/2), self.parent.center_y-(self.height/3)
                    height: self.parent.height-self.parent.height/3
                    width: self.parent.width/2
            Button:
                text:  '%s\n\n\n\n\n[b][size=20sp]%sºF[/size][/b]\n%sºF' %  (root.dTime5, root.dTempHi5, root.dTempLo5)
                markup:True
                text_size: self.size
                outline_color:(1,0,1)
                outline_width:5
                halign: 'center'
                valign: 'top'
                padding_y: 15

                background_color: (0,0,0,.1)
                on_press:
                    self.background_color= (0,0,0,.2)
                on_release:
                    self.background_color= (0,0,0,.1)
                Image:
                    source: "data/%s.png" % root.dIcon5
                    pos: self.parent.center_x-(self.width/2), self.parent.center_y-(self.height/3)
                    height: self.parent.height-self.parent.height/3
                    width: self.parent.width/2
            Button:
                text: '%s\n\n\n\n\n[b][size=20sp]%sºF[/size][/b]\n%sºF' %  (root.dTime6, root.dTempHi6, root.dTempLo6)
                markup:True
                text_size: self.size
                halign: 'center'
                valign: 'top'
                padding_y: 15

                background_color: (0,0,0,.1)
                on_press:
                    self.background_color= (0,0,0,.2)
                on_release:
                    self.background_color= (0,0,0,.1)
                Image:
                    source: "data/%s.png" % root.dIcon6
                    pos: self.parent.center_x-(self.width/2), self.parent.center_y-(self.height/3)
                    height: self.parent.height-self.parent.height/3
                    width: self.parent.width/2
